<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Ruikoto"><title>简单学了下Tableau：Youtube视频数据可视化视频制作 · 泡菜的云酒吧</title><meta name="description" content="本文章初始发布日期：2019年5月11日 01:48。


前几天看了一篇讲可视化数据的文章，便想着自己试试做做，于是打算用ATSiege在Youtube产生的大量数据做做看。于是下载了相关软件，花了不少时间调取了Youtube的视频数据，进行了一些处理，但是准备开始做图表分析的时候遇到了一些困难。"><meta name="keywords" content="Blog,博客,Hexo,泡菜的云酒吧"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.webp"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/insight.css"><link rel="stylesheet" href="/css/search.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/js/jquery.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body><div class="page-top animated fadeInDown"><div class="nav"><li> <a href="/">首页</a></li><li> <a href="/archives">归档</a></li><li> <a href="/tags">标签</a></li><li> <a href="/about">关于</a></li><li> <a href="/links">友链</a></li></div><div class="information"><div class="nav_right_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li><li><a class="fa fa-search" onclick="openWindow();"></a></li></div><div class="avatar"><img src="/images/logo.webp"></div></div></div><div class="sidebar animated fadeInDown"><div class="sidebar-top"><div class="logo-title"><div class="title"><img src="/images/logo@2x.webp" style="width:200px;" alt="favicon"><h3 title=""><a href="/">泡菜的云酒吧</a></h3><div class="description"><p>今天真是个睡觉的好日子</p></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://github.com/Ruikoto"><i class="fa fa-github"></i></a></li><li><a target="_blank" rel="noopener" href="https://weibo.com/Ruikoto"><i class="fa fa-weibo"></i></a></li></ul></div></div><div class="footer"><div class="p"> <span> 禁止转载 </span><i class="fa fa-star"></i><span> Ruikoto</span></div><div class="by_farbox"><span>Powered by </span><a href="https://hexo.io/zh-cn/" target="_blank">Hexo </a><span> & </span><span>Anatolo </span></div><div class="beian"><a href="http://www.beian.miit.gov.cn/" target="_blank"></a><span style="height:10px;margin-left: 10px;">|</span></div></div></div><div class="main"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>简单学了下Tableau：Youtube视频数据可视化视频制作</a></h3></div><div class="post-content"><p><blockquote>
<p>本文章初始发布日期：<strong>2019年5月11日 01:48</strong>。</p>
</blockquote>
<blockquote>
<p>前几天看了一篇讲可视化数据的文章，便想着自己试试做做，于是打算用ATSiege在Youtube产生的大量数据做做看。于是下载了相关软件，花了不少时间调取了Youtube的视频数据，进行了一些处理，但是准备开始做图表分析的时候遇到了一些困难。这个时候突然想起来B站之前很流行做数据可视化视频，手上又有这么多现成的数据，那就来做做看吧！</p>
</blockquote>
<blockquote>
<p><strong>Ps.文章结尾有好东西别错过哟~</strong></p>
</blockquote>
<h1 id="最终效果"><a href="#最终效果" class="headerlink" title="最终效果"></a>最终效果</h1><p>先直接来看看成品的效果吧！</p>
<h3 id="Bilibili"><a href="#Bilibili" class="headerlink" title="Bilibili"></a>Bilibili</h3><iframe width="560" height="315" src="//player.bilibili.com/player.html?aid=51906550&cid=90872725&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

<p>Tips：B站外部播放器非常狗屎，建议直接点击<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/av51906550" title="这里">这里</a>观看。</p>
<h3 id="Youtube"><a href="#Youtube" class="headerlink" title="Youtube"></a>Youtube</h3><iframe width="560" height="315" src="https://www.youtube.com/embed/gC5fn1hPwUs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h1 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h1><p>在制作数据可视化前，你需要准备这些东西。</p>
<ol>
<li><p>数据预处理工具 <strong>Tableau Prep</strong><br>官网：<a target="_blank" rel="noopener" href="https://www.tableau.com/zh-cn" title="https://www.tableau.com/zh-cn">https://www.tableau.com/zh-cn</a><br>学生授权以及公共研究用的授权是免费的，不过这个软件可以使用Excel代替，功能大体相同。</p>
</li>
<li><p>数据可视化视频生成工具<br>Github项目地址：<a target="_blank" rel="noopener" href="https://github.com/Jannchie/Historical-ranking-data-visualization-based-on-d3.js" title="https://github.com/Jannchie/Historical-ranking-data-visualization-based-on-d3.js">https://github.com/Jannchie/Historical-ranking-data-visualization-based-on-d3.js</a><br>Zip地址：<a target="_blank" rel="noopener" href="https://github.com/Jannchie/Historical-ranking-data-visualization-based-on-d3.js/archive/master.zip" title="https://github.com/Jannchie/Historical-ranking-data-visualization-based-on-d3.js/archive/master.zip">https://github.com/Jannchie/Historical-ranking-data-visualization-based-on-d3.js/archive/master.zip</a></p>
</li>
</ol>
<h1 id="数据收集"><a href="#数据收集" class="headerlink" title="数据收集"></a>数据收集</h1><p>数据的收集是整个过程的第一步，也是非常麻烦的一步，对于大部分网站都需要使用<strong>脚本</strong>与<strong>爬虫</strong>来批量抓取数据，不过因为我们今天调取数据的Youtube平台自身支持数据导出，所以脚本爬虫什么的我们之后再讲，如果不想了解油管怎么导出的可以跳过下面的这一小节。</p>
<h3 id="Youtube数据导出"><a href="#Youtube数据导出" class="headerlink" title="Youtube数据导出"></a>Youtube数据导出</h3><p>首先打开Youtube创作者工作室，注意这里打开的不是Youtube Studio，Studio提供的导出数据功能并不如传统的创作者工作室好用，如果打开了Studio的话可以在左下角进行切换。</p>
<p>接下来打开<code>数据分析</code>板块，如果我们需要调取观看时长与观看次数的话，可以打开<code>观看时长</code>子版块。</p>
<p><img src="https://pics.ruikoto.pub/blog/pics10/01.png"></p>
<p>接下来，我们需要调取这个视频从上传日开始至今每一天的数据，我们需要把右上角的时间跨度修改为<strong>存在期间</strong>。</p>
<p>顺便一提，经过我的测试，这里只能导出500天的数据，如果时间跨度超过了500天的话可以考虑使用自定义时间跨度对数据进行拆分。</p>
<p><img src="https://pics.ruikoto.pub/blog/pics10/02.png"></p>
<p>点击右上角的小齿轮，将导出模式修改为<code>所有维度，所有指标</code>，并保存。</p>
<p><img src="https://pics.ruikoto.pub/blog/pics10/05.png"></p>
<p>接下来就可以导出数据了，点击右上角的<code>导出报告</code>，接着选择第二项<code>Microsoft Excel (.xls)</code>，因为含有多张表格，这里不建议选择<code>.csv</code>格式进行导出，后期处理稍稍有些麻烦。</p>
<p><img src="https://pics.ruikoto.pub/blog/pics10/03.png"></p>
<p>打开表格，进入<code>日期</code>工作表，就可以查看精确到每天的详细数据了。</p>
<p><img src="https://pics.ruikoto.pub/blog/pics10/04.png"></p>
<p>但是！这是整个频道的数据，并不是拆分成单个视频的数据，所以这个数据并没有什么卵用，需要分多个视频重新调取。</p>
<p>因为不会写脚本，我采用了一个笨办法。在左上角的搜索内容选项一个一个视频地查看数据，并进行导出，缺点是工作量实在是有点大。</p>
<p><img src="https://pics.ruikoto.pub/blog/pics10/06.png"></p>
<p>导出后记得把所有文件放在一个单独目录中，并给文件改个名，比如说可以改成视频名称，之后可以用作柱状图上的名称，这一步就算是完成了。</p>
<p><img src="https://pics.ruikoto.pub/blog/pics10/07.png"></p>
<h3 id="数据整理与清洗"><a href="#数据整理与清洗" class="headerlink" title="数据整理与清洗"></a>数据整理与清洗</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">本段介绍的Tebleau Prep是整理数据的众多方法之一，操作可以全部使用Excel完成，本段主要是提供一个思路。</span><br></pre></td></tr></table></figure>

<p>打开 <strong>Tableau Prep</strong> ，左侧选择<code>连接</code>，并选择<code>Microsoft Excel</code>，全选所有视频的数据文件，并打开。</p>
<p><img src="https://pics.ruikoto.pub/blog/pics10/08.png"><br><img src="https://pics.ruikoto.pub/blog/pics10/09.png"></p>
<h4 id="第一步，我们需要批量选择所有文件中的这个字段。"><a href="#第一步，我们需要批量选择所有文件中的这个字段。" class="headerlink" title="第一步，我们需要批量选择所有文件中的这个字段。"></a>第一步，我们需要批量选择所有文件中的这个字段。</h4><p>进行这一步，我们需要进行一些设置：</p>
<ol>
<li>选择左侧任意文件，将数据所在的工作表拖至右侧空白面板。例如我们现在需要的数据在<code>日期</code>工作表中，我们需要把<code>日期</code>拖到右侧。<br><img src="https://pics.ruikoto.pub/blog/pics10/10.png"></li>
<li>在右下面板中选择<code>通配符并集</code></li>
<li>将搜索范围限定到存放数据文件的文件夹中。</li>
<li>文件匹配方式为<code>包括</code>，匹配内容为<code>*</code>，表示我们需要搜索这个文件夹下的所有文件。</li>
<li>工作表匹配方式为<code>包括</code>，匹配内容为<code>日期</code>，表示我们需要搜索并提取所有名称中包括<code>日期</code>的工作表。</li>
<li>等待搜索完成后点击<code>应用</code>，等待进度条处理完毕。<br><img src="https://pics.ruikoto.pub/blog/pics10/12.png"></li>
</ol>
<h4 id="第二步，我们需要初步确认一下我们需要表中的哪几个字段。"><a href="#第二步，我们需要初步确认一下我们需要表中的哪几个字段。" class="headerlink" title="第二步，我们需要初步确认一下我们需要表中的哪几个字段。"></a>第二步，我们需要初步确认一下我们需要表中的哪几个字段。</h4><p>接下来我们需要看一下，右下角出现的表格中的那么多字段，我们需要哪些。<br>比如说我们需要观看时长随日期的增长趋势，那么我们就只需要勾选<code>日期</code>以及<code>观看时长（分钟）</code>两个字段。<br>另外，我们还需要根据文件名来确定视频名称字段，我们还需要勾选一下位于表格底部的<code>File Paths</code>字段</p>
<p><img src="https://pics.ruikoto.pub/blog/pics10/11.png"></p>
<h4 id="第三步，对数据进行格式整理。"><a href="#第三步，对数据进行格式整理。" class="headerlink" title="第三步，对数据进行格式整理。"></a>第三步，对数据进行格式整理。</h4><p>在后续的可视化视频中，我们使用的工具严格限制了原始数据的格式，例如日期必须是<code>YYYY-MM-DD</code>，而Youtube导出的日期格式还包括了几时几分，这些数据都是不符合要求的，我们需要对他们进行整理。</p>
<ol>
<li><p>选择流程图中原始数据旁的加号，选择<code>+ 添加步骤</code>。<br><img src="https://pics.ruikoto.pub/blog/pics10/13.png"></p>
</li>
<li><p>将日期字段的数据类型修改为<code>字符串</code>。<br><img src="https://pics.ruikoto.pub/blog/pics10/14.png"></p>
</li>
<li><p>使用拆分功能，点击右上角三个点，选择<code>拆分值 -&gt; 自定义拆分</code>。<br><img src="https://pics.ruikoto.pub/blog/pics10/15.png"></p>
</li>
<li><p>我们注意到，我们只需要<strong>第一个空格</strong>之前的内容，所以在<code>使用分隔符</code>处中填入一个空格，并选择拆分第<code>1</code>个字段。<br><img src="https://pics.ruikoto.pub/blog/pics10/16.png"></p>
</li>
<li><p>这样我们就得到了我们想要的日期格式，相同方法处理<code>File Paths</code>字段，得到不含文件名后缀的视频名称。<br><img src="https://pics.ruikoto.pub/blog/pics10/17.png"></p>
</li>
<li><p>右键删除不需要的两个字段，并把剩下的三个字段进行重命名，视频名称修改为<code>name</code>，观看时长修改为<code>value</code>，日期修改为<code>date</code>。<br><img src="https://pics.ruikoto.pub/blog/pics10/18.png"></p>
</li>
</ol>
<p>到此为止我们回顾一下我们这一步所进行的处理。<br><img src="https://pics.ruikoto.pub/blog/pics10/19.png"></p>
<h4 id="第四步，导出我们需要的数据。"><a href="#第四步，导出我们需要的数据。" class="headerlink" title="第四步，导出我们需要的数据。"></a>第四步，导出我们需要的数据。</h4><p>接下来，我么就需要把这些数据进行导出为<code>.csv</code>格式表格了。</p>
<ol>
<li><p>在流程图中添加输出<br><img src="https://pics.ruikoto.pub/blog/pics10/20.png"></p>
</li>
<li><p>选择<code>保存到文件</code>，并保存为<code>逗号分隔值(.csv)</code>格式文件。记得再次核对一下右侧表格是否分为了<code>name</code>,<code>data</code>,<code>value</code>三个字段，如果这里出了问题的话可能会导致后续操作无法进行。<br><img src="https://pics.ruikoto.pub/blog/pics10/21.png"></p>
</li>
<li><p>点击<code>运行流程</code>,即可运行流程并对数据进行导出。<br><img src="https://pics.ruikoto.pub/blog/pics10/22.png"></p>
</li>
<li><p>打开导出的文件核对一下，发现<code>value</code>字段是每天新增的观看时长，而非总观看时长。因为我还没完全弄懂<code>Tableau</code>的公式处理，我这里使用了Excel函数进行了汇总计算，将<code>value</code>字段替换成了播放量的总和。<br><img src="https://pics.ruikoto.pub/blog/pics10/23.png"><br><img src="https://pics.ruikoto.pub/blog/pics10/24.png"></p>
</li>
</ol>
<h1 id="可视化视频制作"><a href="#可视化视频制作" class="headerlink" title="可视化视频制作"></a>可视化视频制作</h1><p>首先解压我们之前下载的生成工具，打开<code>\src</code>目录，可以看到里面有一个<code>config.js</code>文件，使用编辑器修改这个配置文件即可控制生成视频的最终效果，里面有详细注释我就不再多解释，都可以自己改改试试看，我贴一下我生成这个视频使用的配置。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">  <span class="comment">// 数据源的编码方式。</span></span><br><span class="line">  <span class="comment">// 默认为UTF-8。</span></span><br><span class="line">  <span class="comment">// 如果是国内用户，且使用旧版Execl处理数据，保存的编码很可能是GBK的，如果出现乱码则将这里改成GBK。</span></span><br><span class="line">  <span class="comment">// 不建议修改这里。而是建议将自己制作完毕的csv文件的内容复制到example.csv中。因为example.csv的编码格式是所有语言都支持的。</span></span><br><span class="line">  <span class="comment">// Encoding is not recommended to be modified.</span></span><br><span class="line">  <span class="comment">// Instead, it is recommended to copy the contents of the CSV file produced by yourself to example.csv.</span></span><br><span class="line">  <span class="comment">// The encoding format of example.csv is supported by all languages.</span></span><br><span class="line">  <span class="attr">encoding</span>: <span class="string">&quot;UTF-8&quot;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 每个时间节点最多显示的条目数。</span></span><br><span class="line">  <span class="attr">max_number</span>: <span class="number">18</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 控制是否显示顶部附加信息文字。</span></span><br><span class="line">  <span class="attr">showMessage</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 时间自动排序。</span></span><br><span class="line">  <span class="comment">// !!!请确保打开此项时，使用的是标准日期格式！(即：YYYY-MM-DD HH:MM)</span></span><br><span class="line">  <span class="comment">// 如果关闭，排序顺序为csv表格的时间字段自上而下的出现顺序。</span></span><br><span class="line">  <span class="comment">// 如果你的日期格式为标准的日期格式，则可以无视数据排序，达到自动按照日期顺序排序的效果。</span></span><br><span class="line">  <span class="comment">// 开启auto_sort可以实现时间的自动补间。</span></span><br><span class="line">  <span class="comment">// Auto Sort by Time</span></span><br><span class="line">  <span class="comment">// Please ensure using standard datetime format (YYYY-MM-DD HH:MM) when this term is enabled!!!</span></span><br><span class="line">  <span class="attr">auto_sort</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 时间格式化</span></span><br><span class="line">  <span class="attr">timeFormat</span>: <span class="string">&quot;%Y-%m-%d&quot;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 倒序，使得最短的条位于最上方</span></span><br><span class="line">  <span class="attr">reverse</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 类型根据什么字段区分？如果是name，则关闭类型显示</span></span><br><span class="line">  <span class="attr">divide_by</span>: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 颜色根据什么字段区分？</span></span><br><span class="line">  <span class="attr">divide_color_by</span>: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 字段的值与其对应的颜色值</span></span><br><span class="line">  <span class="attr">color</span>: &#123;</span><br><span class="line">    <span class="string">&quot;Chinese&quot;</span>: <span class="string">&quot;#1177CC&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Japanese&quot;</span>: <span class="string">&quot;#667788&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 颜色渐变：颜色绑定增长率</span></span><br><span class="line">  <span class="attr">changeable_color</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 添加功能：不同类型的增长率所用渐变色不同(暗→亮)</span></span><br><span class="line">  <span class="comment">// 如果该项为false，那么所有条目全部按照color_range变色</span></span><br><span class="line">  <span class="comment">// 如果该项为true，那么按照src/color_ranges.js中的color_ranges变色，默认色板为color_range</span></span><br><span class="line">  <span class="comment">// 一个具体的设置模板见src/_color_ranges.js，将其更名为color_ranges.js再设置即可</span></span><br><span class="line">  <span class="attr">divide_changeable_color_by_type</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">color_range</span>: [<span class="string">&#x27;#ff7e5f&#x27;</span>, <span class="string">&#x27;#feb47b&#x27;</span>],</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 附加信息内容。</span></span><br><span class="line">  <span class="comment">// left label</span></span><br><span class="line">  <span class="attr">itemLabel</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// right label</span></span><br><span class="line">  <span class="attr">typeLabel</span>: <span class="string">&quot;ATSiegeChannel 中文&quot;</span>,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 榜首项目信息的水平位置 。</span></span><br><span class="line">  <span class="comment">// Top item information horizontal location</span></span><br><span class="line">  <span class="attr">item_x</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 时间点间隔时间。</span></span><br><span class="line">  <span class="attr">interval_time</span>: <span class="number">0.5</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 上方文字水平高度。</span></span><br><span class="line">  <span class="attr">text_y</span>: -<span class="number">50</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 右侧文字横坐标</span></span><br><span class="line">  <span class="attr">text_x</span>: <span class="number">1000</span>,</span><br><span class="line">  <span class="comment">// 偏移量</span></span><br><span class="line">  <span class="attr">offset</span>: <span class="number">350</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 长度小于display_barInfo的bar将不显示barInfo。</span></span><br><span class="line">  <span class="comment">// Hide barInfo if bar is shorter than barInfo</span></span><br><span class="line">  <span class="attr">display_barInfo</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 使用计数器</span></span><br><span class="line">  <span class="comment">// 注意！使用计时器和使用类型目前不能兼容，即不能同时开启！</span></span><br><span class="line">  <span class="comment">// 计数器会出现在右上角，记录着当前榜首的持续时间。</span></span><br><span class="line">  <span class="attr">use_counter</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// 每个时间节点对于计数器的步长。</span></span><br><span class="line">  <span class="comment">// 比如时间节点日期的间隔可能为1周（七天），那么step的值就应该为7。</span></span><br><span class="line">  <span class="attr">step</span>: <span class="number">1</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">  <span class="comment">// 格式化数值</span></span><br><span class="line">  <span class="comment">// 这里控制着数值的显示位数。主要靠修改中间的数字完成，如果为1则为保留一位小数。</span></span><br><span class="line">  <span class="comment">// 逗号表示每隔三位数用&quot;,&quot;分割</span></span><br><span class="line">  <span class="comment">// &#x27;.2f&#x27; means keeping two decimals.</span></span><br><span class="line">  <span class="attr">format</span>: <span class="string">&quot;,.0f&quot;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 后缀</span></span><br><span class="line">  <span class="attr">postfix</span>: <span class="string">&quot; 分钟&quot;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 如果看不懂这是在干什么的话，建议不要修改这里。</span></span><br><span class="line">  <span class="comment">// 反格式化函数:</span></span><br><span class="line">  <span class="comment">// 格式化操作可能会导致NaN问题。此函数将格式化后的数值反格式化为JS可以识别的数字。</span></span><br><span class="line">  <span class="attr">deformat</span>: <span class="function"><span class="keyword">function</span> (<span class="params">val, postfix</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Number</span>(val.replace(postfix, <span class="string">&quot;&quot;</span>).replace(<span class="regexp">/\,/g</span>, <span class="string">&quot;&quot;</span>));</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 图表左右上下间距。</span></span><br><span class="line">  <span class="comment">// 注意，left_margin不包括左侧的label，修改数值较小会导致左侧label不显示</span></span><br><span class="line">  <span class="attr">left_margin</span>: <span class="number">250</span>,</span><br><span class="line">  <span class="attr">right_margin</span>: <span class="number">180</span>,</span><br><span class="line">  <span class="attr">top_margin</span>: <span class="number">180</span>,</span><br><span class="line">  <span class="attr">bottom_margin</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 是否开启时间标签。</span></span><br><span class="line">  <span class="attr">dateLabel_switch</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// 时间标签坐标。建议x：1000 y：-50开始尝试，默认位置为x:null,y:null</span></span><br><span class="line">  <span class="attr">dateLabel_x</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">dateLabel_y</span>: <span class="literal">null</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 允许大于平均值的条消失时上浮。</span></span><br><span class="line">  <span class="attr">allow_up</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 所有条目上浮 - 用于反向排行榜等情况</span></span><br><span class="line">  <span class="attr">always_up</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 设置动画效果，如果为true，则新进入的条目从0开始。</span></span><br><span class="line">  <span class="attr">enter_from_0</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 如果所有数字都很大，导致拉不开差距则开启此项使得坐标原点变换为（最小值）*2-（最大值）</span></span><br><span class="line">  <span class="attr">big_value</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 如果要使用半对数坐标，则开启此项</span></span><br><span class="line">  <span class="attr">use_semilogarithmic_coordinate</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// barinfo太长？也许可以试试这个</span></span><br><span class="line">  <span class="attr">long</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 延迟多少个时间节点开始</span></span><br><span class="line">  <span class="attr">wait</span>: <span class="number">15</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 单独控制交换动画速度倍率</span></span><br><span class="line">  <span class="attr">update_rate</span>: <span class="number">0.5</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 开启匀速动画效果</span></span><br><span class="line">  <span class="comment">// animation:&#x27;linear&#x27;,</span></span><br><span class="line">  <span class="attr">showLabel</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// label x轴位置</span></span><br><span class="line">  <span class="attr">labelx</span>: -<span class="number">46</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">use_img</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 图片路径，本地图片或者网上图片。</span></span><br><span class="line">  <span class="comment">// 也可在imgs.js中配置。</span></span><br><span class="line">  <span class="attr">imgs</span>: &#123;</span><br><span class="line">    <span class="string">&quot;条目&quot;</span>: <span class="string">&quot;http://i1.hdslb.com/bfs/face/983034448f81f45f05956d0455a86fe0639d6a36.jpg&quot;</span>,</span><br><span class="line">    <span class="string">&quot;任意名称&quot;</span>: <span class="string">&quot;path/to/img&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 全局背景颜色</span></span><br><span class="line">  <span class="attr">background_color</span>: <span class="string">&quot;#FFFFFF&quot;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 矩形柱是否为圆角矩形</span></span><br><span class="line">  <span class="attr">rounded_rectangle</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 是否显示x轴轴线</span></span><br><span class="line">  <span class="attr">show_x_tick</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 限制bar info 展示的长度</span></span><br><span class="line">  <span class="comment">// limit bar info display length</span></span><br><span class="line">  <span class="attr">bar_name_max</span>: <span class="number">30</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>最后就只需要打开文件夹中的<code>bargraph.html</code>，选择文件，数据可视化视频就显示在屏幕上辣（建议按<strong>F11</strong>开启浏览器全屏）！如果想要分享给他人或者上传的话，可以使用录制工具录下来，再加点BGM之类的，效果超棒~</p>
<h1 id="好东西？"><a href="#好东西？" class="headerlink" title="好东西？"></a>好东西？</h1><p>最后把制作这个视频的工具（配置文件已经修改好打开就能用），还有ATSiege观看次数的数据库打包分享给大家吧，下载之后打开<code>\src</code>目录中的<code>bargraph.html</code>文件后，选择打开<code>ATSiege观看数数据.csv</code>文件，就可以观看ATSiege在Youtube平台视频观看数的增长趋势（这个并不是开头视频里的播放时长数据哟）~</p>
<p>下载地址（524 KiB）：<a target="_blank" rel="noopener" href="https://github.com/Ruikoto/Historical-ranking-data-visualization-based-on-d3.js/releases/download/1.0/ATSiege.7z" title="https://github.com/Ruikoto/Historical-ranking-data-visualization-based-on-d3.js/releases/download/1.0/ATSiege.7z">https://github.com/Ruikoto/Historical-ranking-data-visualization-based-on-d3.js/releases/download/1.0/ATSiege.7z</a></p>
<p>解压密码：<code>ruikoto.pub</code></p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>最近看了几个和数据有关的TED演讲，对这方面有些感兴趣，本来装 Tableau 的时候并没打算做数据可视化的视频，不过突然想起来就正好做了，导致这个系列的第一篇文章有些偏题，甚至完全没有用到 Tableau 软件的本体，那么剩下想和大家分享的内容就留到下篇文章吧~</p>
<p>还有就是，看了不评论我这个云酒吧真的好冷清的，各位好哥哥不管有没有看完留个评论好mua？</p>
</p><div class="tip">禁止转载<br>作者: Ruikoto</div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2019-05-11</span><a class="tag" href="/categories/学习笔记/" title="学习笔记">学习笔记 </a><i class="fa fa-tag"></i><a class="tag" href="/tags/学习笔记/" title="学习笔记">学习笔记 </a><a class="tag" href="/tags/数据处理/" title="数据处理">数据处理 </a><a class="tag" href="/tags/Tableau/" title="Tableau">Tableau </a><span class="leancloud_visitors"></span><span>大约3855个字, 12分钟51秒读完</span></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="" onclick="javascript:join_favorite()" ref="sidebar"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://ruikoto.pub/2019/05/11/12-简单学了下Tableau：Youtube视频数据可视化视频制作/,泡菜的云酒吧,简单学了下Tableau：Youtube视频数据可视化视频制作,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2019/05/11/13-%E5%86%B7%E9%85%B8%E7%81%B5%E7%81%AB%E9%94%85%E5%91%B3%E7%89%99%E8%86%8F%E5%BC%80%E7%AE%B1%E4%B8%8E%E4%BD%BF%E7%94%A8%E6%8A%A5%E5%91%8A/" title="冷酸灵火锅味牙膏开箱与使用报告">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2019/05/06/11-%E4%B8%BA%E4%BA%86%E7%8E%A9%20osu!%20%E4%B9%B0%E4%BA%86%E5%9D%97%E6%95%B0%E4%BD%8D%E6%9D%BF/" title="为了玩 osu! 买了块数位板">下一篇</a></li></ul></div><script src="/js/visitors.js"></script></div></div></div></div><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/add-bookmark.js"></script><script>(function(window){var INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(无标题)",},CONTENT_URL:"/content.json",};window.INSIGHT_CONFIG=INSIGHT_CONFIG})(window);</script><script src="/js/insight.js" defer></script><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input class="searchbox-input ins-search-input" type="text" placeholder="想要查找什么..."><span class="searchbox-close"><a class="fa fa-times-circle" onclick="closeWindow();"></a></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"><p>Seraching...</p></div></div></div></div></body></html>